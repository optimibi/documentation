<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-80 share/share-XDM">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.1">
<title data-rh="true">Embedding Reports with XDM | Datafor</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://optimibi.github.io//docs/en/80 share/share-XDM"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Embedding Reports with XDM | Datafor"><meta data-rh="true" name="description" content="Note:"><meta data-rh="true" property="og:description" content="Note:"><link data-rh="true" rel="icon" href="/docs/en/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://optimibi.github.io//docs/en/80 share/share-XDM"><link data-rh="true" rel="alternate" href="https://optimibi.github.io//docs/80 share/share-XDM" hreflang="zh-CN"><link data-rh="true" rel="alternate" href="https://optimibi.github.io//docs/en/80 share/share-XDM" hreflang="en"><link data-rh="true" rel="alternate" href="https://optimibi.github.io//docs/80 share/share-XDM" hreflang="x-default"><link rel="stylesheet" href="/docs/en/assets/css/styles.12f2dee3.css">
<link rel="preload" href="/docs/en/assets/js/runtime~main.ae4b8500.js" as="script">
<link rel="preload" href="/docs/en/assets/js/main.81803509.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/docs/en/"><div class="navbar__logo"><img src="/docs/en/img/DataFor-ImageFont.svg" alt="" class="themedImage_ToTc themedImage--light_HNdA"><img src="/docs/en/img/DataFor-ImageFont.svg" alt="" class="themedImage_ToTc themedImage--dark_i4oU"></div><b class="navbar__title text--truncate">Help document</b></a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link"><svg viewBox="0 0 24 24" width="20" height="20" aria-hidden="true" class="iconLanguage_nlXk"><path fill="currentColor" d="M12.87 15.07l-2.54-2.51.03-.03c1.74-1.94 2.98-4.17 3.71-6.53H17V4h-7V2H8v2H1v1.99h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04zM18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12zm-2.62 7l1.62-4.33L19.12 17h-3.24z"></path></svg>English</a><ul class="dropdown__menu"><li><a href="/docs/80 share/share-XDM" target="_self" rel="noopener noreferrer" class="dropdown__link">简体中文</a></li><li><a href="/docs/en/80 share/share-XDM" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active">English</a></li></ul></div><div class="searchBox_ZlJk"><div class="navbar__search searchBarContainer_NW3z"><input placeholder="Search" aria-label="Search" class="navbar__search-input"><div class="loadingRing_RJI3 searchBarLoadingRing_YnHq"><div></div><div></div><div></div><div></div></div><div class="searchHintContainer_Pkmr"><kbd class="searchHint_iIMx">ctrl</kbd><kbd class="searchHint_iIMx">K</kbd></div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/en/">Welcome</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/en/00 update/updates-v6.06">Release Notes</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/en/10 start/start-design">Quick start</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/en/20 setup/szybs-sjdsxhgl">Setup</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/en/30 console/kzt-jmgnjs">Console</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/en/40 datasource/sjy-zcdsjlx">Datasource</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/en/50 model/fxmx-fxmxgs">Model</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/en/60 visualizer/visualization-sjqgs">Visualization</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/en/70 analysis/analysis-overview">Analysis</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/docs/en/80 share/jcyfx-fxlj">Share</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/80 share/jcyfx-fxlj">Share link</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/en/80 share/share-XDM">Embedding Reports with XDM</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/80 share/share-export">Export</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/en/80 share/jcyfx-report-api">Reports REST API</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/en/90 tools/tools-sjzd">Tools</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/en/100 system/ststem-yhgl">System</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/en/110 Q&amp;A/Q&amp;A-time-axis">F&amp;Q</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/en/120 advanced/advanced-mdx">Advanced</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" aria-expanded="false" href="/docs/en/130 best/best_zjncxz">Best Practices</a></div></li></ul></nav></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/docs/en/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">Share</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Embedding Reports with XDM</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Embedding Reports Using XDM</h1><blockquote><p><strong>Note:</strong>
The term &quot;<strong>report</strong>&quot; in this document refers to the visual reports created using Datafor or the Visualizer plugin.</p></blockquote><p>Reports support XDM (Cross-Document Messaging) for filtering report data without refreshing the report page. XDM allows control over the report&#x27;s data filtering, styles, and behavior; however, this document focuses solely on data filtering scenarios.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-is-xdm-cross-document-messaging">What is XDM (Cross-Document Messaging)?<a class="hash-link" href="#what-is-xdm-cross-document-messaging" title="Direct link to heading">​</a></h2><p>XDM (Cross-Document Messaging) is a technology that allows secure communication between different web pages or applications from different origins (such as different domains or subdomains). Typically, browsers restrict different-origin pages from accessing each other&#x27;s content to protect user privacy and security. However, in some cases, such as when embedding external content, different-origin pages need to communicate, and XDM can be used for this purpose.</p><p>Web applications use the <code>postMessage</code> API to communicate with the report, sending parameter values to the report. The report then distributes these parameter values as filters to the individual chart components, which re-query data to achieve the filtering effect.</p><p>XDM enables cross-origin communication between web pages without compromising browser security.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="application-scenarios">Application Scenarios:<a class="hash-link" href="#application-scenarios" title="Direct link to heading">​</a></h2><p>When embedding a report within a web application using an iframe, the following scenarios may arise:</p><ol><li>Passing parameters to the report during initial loading to filter report data.</li><li>Changing parameter values in the web application after the report has loaded and passing these values to the report to filter data (without reloading the report).</li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="steps">Steps:<a class="hash-link" href="#steps" title="Direct link to heading">​</a></h2><h3 class="anchor anchorWithStickyNavbar_LWe7" id="importing-the-xdmworker-class-in-the-main-program"><strong>Importing the <code>XDMWorker</code> Class in the Main Program:</strong><a class="hash-link" href="#importing-the-xdmworker-class-in-the-main-program" title="Direct link to heading">​</a></h3><p>In the main program that calls the report, add the following <code>XDMWorker</code> class to facilitate the forwarding of <code>XDM</code> messages. The main program can use the <code>send</code> method of this class to pass filter parameters to the report.</p><div class="language-js codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-js codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">class</span><span class="token plain"> </span><span class="token class-name">XDMWorker</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">constructor</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">onPageInitEvent</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">reportId</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword null nil" style="color:#00009f">null</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token dom variable" style="color:#36acaa">window</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">addEventListener</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;message&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">msg</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> data </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> msg</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> reportMessage</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword control-flow" style="color:#00009f">try</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> reportMessage </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token known-class-name class-name">JSON</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">parse</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">data</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">catch</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">d</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">reportMessage</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">reportMessage</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">event</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">==</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;visualizerReportFileLoaded&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">reportId</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> reportMessage</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">id</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token function" style="color:#d73a49">onPageInitEvent</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">send</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">data</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> target</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> init </span><span class="token parameter operator" style="color:#393A34">=</span><span class="token parameter"> </span><span class="token parameter boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token operator" style="color:#393A34">!</span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">reportId</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">error</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;No reportId found, please wait for the report to be loaded&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> message </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token literal-property property" style="color:#36acaa">trustMark</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">this</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">reportId</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token literal-property property" style="color:#36acaa">event</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;query&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            init</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token literal-property property" style="color:#36acaa">filters</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> data</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        target</span><span class="token operator" style="color:#393A34">?.</span><span class="token method function property-access" style="color:#d73a49">postMessage</span><span class="token punctuation" style="color:#393A34">(</span><span class="token known-class-name class-name">JSON</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">stringify</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">message</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;*&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h3 class="anchor anchorWithStickyNavbar_LWe7" id="scenario-1-passing-parameters-to-the-report-during-initial-loading-to-filter-data">Scenario 1: Passing Parameters to the Report During Initial Loading to Filter Data<a class="hash-link" href="#scenario-1-passing-parameters-to-the-report-during-initial-loading-to-filter-data" title="Direct link to heading">​</a></h3><ol><li><p><strong>Initialize an XDMWorker Object Before Calling the Report:</strong></p><p>Before calling the report, initialize an <code>XDMWorker</code> object. To filter report data during the initial load, call the <code>send</code> method within the <code>onPageInitEvent</code> event, setting the third parameter to <code>true</code>.</p><p><strong>Example:</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">const xdm = new XDMWorker({</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    onPageInitEvent: () =&gt; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">       iframeRef?.current &amp;&amp; xdm.send(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    value: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                      &#x27;product_family_1&#x27;, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                      &#x27;product_family_2&#x27; </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    ],  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    name: &#x27;[product_class].[hierarchy_product_family].[product_family]&#x27;,  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    type: &#x27;name&#x27;,  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                    datatype: &#x27;string&#x27;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">                  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               ], </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               iframeRef.current?.contentWindow, </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               true  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">           );</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">});</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Parameter Description:</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    value: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {i: 0|1, v: string},  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {i: 0|1, v: string}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ], </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        string,  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ],  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name: string,  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    type: &#x27;name&#x27;|&#x27;caption&#x27;,  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    datatype: &#x27;string&#x27;|&#x27;numeric&#x27;|&#x27;timestamp&#x27;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><ul><li><strong>value:</strong> Parameter values from the web application.</li></ul><table><thead><tr><th>Value Type</th><th>Example</th></tr></thead><tbody><tr><td>x in (&#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;)</td><td>{&#x27;value&#x27;:<!-- -->[&#x27;a&#x27;, &#x27;b&#x27;, &#x27;c&#x27;]<!-- -->,&#x27;datatype&#x27;:&#x27;string&#x27;}</td></tr><tr><td>x &gt;= 1 and x &lt; 3</td><td>{&#x27;value&#x27;:<!-- -->[{&#x27;i&#x27;:&#x27;1&#x27;,&#x27;v&#x27;:&#x27;1&#x27;},{&#x27;i&#x27;:&#x27;0&#x27;,&#x27;v&#x27;:&#x27;3&#x27;}]<!-- -->,&#x27;datatype&#x27;:&#x27;numeric&#x27;}</td></tr><tr><td>x between (2, 5) or x between (4, 6)</td><td>{&#x27;value&#x27;:[<!-- -->[&#x27;2&#x27;, &#x27;5&#x27;]<!-- -->, <!-- -->[&#x27;4&#x27;, &#x27;6&#x27;]<!-- -->],&#x27;datatype&#x27;:&#x27;numeric&#x27;}</td></tr><tr><td>x between (2, 5) or x between (4, 6) or x in (7, 8)</td><td>{&#x27;value&#x27;:[<!-- -->[&#x27;2&#x27;, &#x27;5&#x27;]<!-- -->, <!-- -->[&#x27;4&#x27;, &#x27;6&#x27;]<!-- -->, &#x27;7&#x27;, &#x27;8&#x27;],&#x27;datatype&#x27;:&#x27;numeric&#x27;}</td></tr><tr><td>x &gt;= &#x27;2024-01-01 00:00:00+8&#x27; and x &lt; &#x27;2025-01-01 00:00:00+8&#x27;</td><td>{&#x27;value&#x27;:<!-- -->[{&#x27;i&#x27;:&#x27;1&#x27;,&#x27;v&#x27;:&#x27;1704038400&#x27;},{&#x27;i&#x27;:&#x27;0&#x27;,&#x27;v&#x27;:&#x27;1735660800&#x27;}]<!-- -->,&#x27;datatype&#x27;:&#x27;timestamp&#x27;}</td></tr></tbody></table><ul><li><strong>name:</strong> The unique name of the field in the report’s analytical model.</li><li><strong>type:</strong> Specifies whether the parameter value is applied to the field’s name or caption.</li><li><strong>datatype:</strong> The data type of the filter value.</li></ul></li><li><p><strong>Call the Report</strong></p><ul><li><p>Obtain the report&#x27;s embedding mode URL.</p><p>[Reference Document]<!-- -->(<a href="https://help.datafor.com.cn/docs/en/80" target="_blank" rel="noopener noreferrer">https://help.datafor.com.cn/docs/en/80</a> share/jcyfx-report-api)</p></li><li><p>Add a &quot;delay time parameter&quot; to the report URL:</p><p>Add the <strong>delay time parameter</strong> <code>__xdmTimeout=150</code> to the report link, e.g., <code>http://localhost:28080/datafor/plugin/datafor/api/integrate/L2hvbWUvYWRtaW4vZXhhbXBsZTEuZGF0YWZvcg==?__xdmTimeout=150</code>.</p><blockquote><p><strong>Note:</strong>
<strong>What is the &quot;delay time parameter&quot;?</strong> After the report is opened, it will broadcast a report initialization message and wait for 150ms. If a valid response is received within the wait time, the parameters in the response are used as the initial data filter values. You can adjust this delay time based on the main program’s response speed. If data filtering is not required during the initial report load, this parameter can be omitted.</p></blockquote></li></ul></li></ol><h3 class="anchor anchorWithStickyNavbar_LWe7" id="scenario-2-changing-parameter-values-in-the-web-application-after-the-report-has-loaded-to-filter-data-without-reloading-the-report">Scenario 2: Changing Parameter Values in the Web Application After the Report Has Loaded to Filter Data (Without Reloading the Report)<a class="hash-link" href="#scenario-2-changing-parameter-values-in-the-web-application-after-the-report-has-loaded-to-filter-data-without-reloading-the-report" title="Direct link to heading">​</a></h3><ol><li><p><strong>Call the send Method</strong></p><p>After the report page is opened, if you need to pass parameter values from the web application to the report, you can call the send method in the main program. The report will immediately respond and re-query the data.</p></li><li><p><strong>send Method Call Format:</strong></p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">send(message, target)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p><strong>Parameter Description:</strong></p><ul><li><p><strong>message:</strong> The filter parameters in the following format:</p><div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">[{</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    value: [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {i: 0|1, v: string},  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">            {i: 0|1, v: string}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        ], </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        string,  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ],  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name: string,  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    type: &#x27;name&#x27;|&#x27;caption&#x27;,  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    datatype: &#x27;string&#x27;|&#x27;numeric&#x27;|&#x27;timestamp&#x27;  </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}]</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></li><li><p><strong>target:</strong> The window object of the iframe where the report is opened.</p></li></ul></li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="how-to-obtain-the-uniquename-of-analytical-model-fields">How to Obtain the <code>uniqueName</code> of Analytical Model Fields?<a class="hash-link" href="#how-to-obtain-the-uniquename-of-analytical-model-fields" title="Direct link to heading">​</a></h2><p>In the report designer, when selecting analytical model fields, you can view the <code>uniqueName</code> through the tooltip.</p><p>The <code>uniqueName</code> of the <code>product_department</code> field in the image below is <code>[product_class].[product_department].[product_department]</code>.</p><div align="left"><img loading="lazy" src="../../../..//docs/img/en/datafor/share/1723711770233.png" width="63%" class="img_ev3q"></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="sample-project">Sample Project<a class="hash-link" href="#sample-project" title="Direct link to heading">​</a></h2><p>Please refer to the sample project: <a href="https://github.com/datafor123/visualizer-xdm-demo" target="_blank" rel="noopener noreferrer">https://github.com/datafor123/visualizer-xdm-demo</a></p><div align="left"><img loading="lazy" src="../../../..//docs/img/en/datafor/advanced/1721293514716.png" width="100%" class="img_ev3q"></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/optimibi/documentation/edit/main/docs/80 share/XDM.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/en/80 share/jcyfx-fxlj"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Share link</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/en/80 share/share-export"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Export</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#what-is-xdm-cross-document-messaging" class="table-of-contents__link toc-highlight">What is XDM (Cross-Document Messaging)?</a></li><li><a href="#application-scenarios" class="table-of-contents__link toc-highlight">Application Scenarios:</a></li><li><a href="#steps" class="table-of-contents__link toc-highlight">Steps:</a><ul><li><a href="#importing-the-xdmworker-class-in-the-main-program" class="table-of-contents__link toc-highlight"><strong>Importing the <code>XDMWorker</code> Class in the Main Program:</strong></a></li><li><a href="#scenario-1-passing-parameters-to-the-report-during-initial-loading-to-filter-data" class="table-of-contents__link toc-highlight">Scenario 1: Passing Parameters to the Report During Initial Loading to Filter Data</a></li><li><a href="#scenario-2-changing-parameter-values-in-the-web-application-after-the-report-has-loaded-to-filter-data-without-reloading-the-report" class="table-of-contents__link toc-highlight">Scenario 2: Changing Parameter Values in the Web Application After the Report Has Loaded to Filter Data (Without Reloading the Report)</a></li></ul></li><li><a href="#how-to-obtain-the-uniquename-of-analytical-model-fields" class="table-of-contents__link toc-highlight">How to Obtain the <code>uniqueName</code> of Analytical Model Fields?</a></li><li><a href="#sample-project" class="table-of-contents__link toc-highlight">Sample Project</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Datafor Co., Ltd.</div><ul class="footer__items clean-list"></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2024 Datafor, Inc.</div></div></div></footer></div>
<script src="/docs/en/assets/js/runtime~main.ae4b8500.js"></script>
<script src="/docs/en/assets/js/main.81803509.js"></script>
</body>
</html>