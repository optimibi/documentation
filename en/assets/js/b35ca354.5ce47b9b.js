"use strict";(self.webpackChunkdatafor_document=self.webpackChunkdatafor_document||[]).push([[1016],{3905:(e,t,n)=>{n.d(t,{Zo:()=>p,kt:()=>d});var o=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=o.createContext({}),l=function(e){var t=o.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=l(e.components);return o.createElement(s.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},u=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,s=e.parentName,p=c(e,["components","mdxType","originalType","parentName"]),u=l(n),d=r,h=u["".concat(s,".").concat(d)]||u[d]||m[d]||a;return n?o.createElement(h,i(i({ref:t},p),{},{components:n})):o.createElement(h,i({ref:t},p))}));function d(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,i=new Array(a);i[0]=u;var c={};for(var s in t)hasOwnProperty.call(t,s)&&(c[s]=t[s]);c.originalType=e,c.mdxType="string"==typeof e?e:r,i[1]=c;for(var l=2;l<a;l++)i[l]=n[l];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}u.displayName="MDXCreateElement"},3846:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>i,default:()=>m,frontMatter:()=>a,metadata:()=>c,toc:()=>l});var o=n(7462),r=(n(7294),n(3905));const a={id:"best-xnty",title:"Datafor Performance Tuning",sidebar_position:40},i="Datafor Performance Tuning",c={unversionedId:"130 best/best-xnty",id:"130 best/best-xnty",title:"Datafor Performance Tuning",description:"When deploying Datafor, it is important to ensure that the system has sufficient available resources (CPU, memory, disk space, etc.) to ensure its optimal performance. However, even with sufficient resources, performance issues may arise due to incorrect configurations. This document provides some common Datafor performance tuning tips to help you optimize the performance of your Datafor deployment.",source:"@site/i18n/en/docusaurus-plugin-content-docs/current/130 best/Datafor \u6027\u80fd\u8c03\u4f18.md",sourceDirName:"130 best",slug:"/130 best/best-xnty",permalink:"/documentation/en/130 best/best-xnty",draft:!1,editUrl:"https://github.com/optimibi/documentation/edit/main/docs/130 best/Datafor \u6027\u80fd\u8c03\u4f18.md",tags:[],version:"current",sidebarPosition:40,frontMatter:{id:"best-xnty",title:"Datafor Performance Tuning",sidebar_position:40},sidebar:"tutorialSidebar",previous:{title:"Increasing Memory Limit for Datafor Server",permalink:"/documentation/en/130 best/best_zjncxz"}},s={},l=[{value:"Database Tuning",id:"database-tuning",level:2},{value:"Use the right database",id:"use-the-right-database",level:3},{value:"Configure connection pool",id:"configure-connection-pool",level:3},{value:"Configure caching",id:"configure-caching",level:3},{value:"Tomcat Tuning",id:"tomcat-tuning",level:2},{value:"Choose the right connector",id:"choose-the-right-connector",level:3},{value:"Set the right thread pool size",id:"set-the-right-thread-pool-size",level:3},{value:"Consider enabling compression",id:"consider-enabling-compression",level:3},{value:"Host static content on a web server",id:"host-static-content-on-a-web-server",level:3},{value:"JVM Tuning",id:"jvm-tuning",level:2},{value:"Increase memory",id:"increase-memory",level:3},{value:"Enable garbage collection logging",id:"enable-garbage-collection-logging",level:3},{value:"Enable compiler optimizations",id:"enable-compiler-optimizations",level:3},{value:"Considerations",id:"considerations",level:2}],p={toc:l};function m(e){let{components:t,...n}=e;return(0,r.kt)("wrapper",(0,o.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h1",{id:"datafor-performance-tuning"},"Datafor Performance Tuning"),(0,r.kt)("p",null,"When deploying Datafor, it is important to ensure that the system has sufficient available resources (CPU, memory, disk space, etc.) to ensure its optimal performance. However, even with sufficient resources, performance issues may arise due to incorrect configurations. This document provides some common Datafor performance tuning tips to help you optimize the performance of your Datafor deployment."),(0,r.kt)("h2",{id:"database-tuning"},"Database Tuning"),(0,r.kt)("p",null,"The query performance of Datafor analytics reports relies on the query performance of the database. Therefore, tuning the database appropriately can improve Datafor performance. Here are some common database tuning recommendations:"),(0,r.kt)("h3",{id:"use-the-right-database"},"Use the right database"),(0,r.kt)("p",null,"It is recommended to use a scalable and performant database."),(0,r.kt)("h3",{id:"configure-connection-pool"},"Configure connection pool"),(0,r.kt)("p",null,"A connection pool is a component that manages connections between the application and the database. Using a connection pool can reduce network traffic between the application and the database, and improve performance."),(0,r.kt)("p",null,"Here is an example configuration using the c3p0 connection pool:"),(0,r.kt)("h3",{id:"configure-caching"},"Configure caching"),(0,r.kt)("p",null,"Caching is a component that caches data between the application and the database. Using caching can reduce the number of times data is retrieved from the database, and improve performance."),(0,r.kt)("h2",{id:"tomcat-tuning"},"Tomcat Tuning"),(0,r.kt)("p",null,"Tomcat is the web container that runs Datafor. Here are some common Tomcat tuning recommendations:"),(0,r.kt)("h3",{id:"choose-the-right-connector"},"Choose the right connector"),(0,r.kt)("p",null,"The default Tomcat connector used in Datafor is the HTTP/1.1 NIO protocol connector. This connector uses NIO technology to improve performance and throughput, and supports long connections. In Datafor, you can find the following connector configuration in the server.xml file:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'<Connector port="8080" protocol="org.apache.coyote.http11.Http11NioProtocol"\n           connectionTimeout="20000"\n           redirectPort="8443" />\n')),(0,r.kt)("h3",{id:"set-the-right-thread-pool-size"},"Set the right thread pool size"),(0,r.kt)("p",null,"Each connector can have a thread pool configured to handle its incoming requests. The thread pool should be configured based on the expected concurrent connections. Datafor uses the default Tomcat thread pool configuration, which has a default value of 200."),(0,r.kt)("p",null,"You can add the maxThreads and minSpareThreads properties to the connector in the server.xml file. Here is an example configuration with a minimum thread count of 300 and a maximum thread count of 500:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'<Connector port="8080" protocol="HTTP/1.1"\n           connectionTimeout="20000"\n           redirectPort="8443"\n           maxThreads="500"\n           minSpareThreads="300"\n           prestartminSpareThreads="true"\n           maxIdleTime="60000" />\n')),(0,r.kt)("h3",{id:"consider-enabling-compression"},"Consider enabling compression"),(0,r.kt)("p",null,"Tomcat can compress content sent to browsers and other applications. This can improve performance by reducing network traffic, but requires compression and decompression. It is recommended to enable compression."),(0,r.kt)("p",null,"Here is an example configuration:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},'<Connector port="8080" protocol="HTTP/1.1"\n           connectionTimeout="20000"\n           redirectPort="8443"\n           compression="on" />\n')),(0,r.kt)("h3",{id:"host-static-content-on-a-web-server"},"Host static content on a web server"),(0,r.kt)("p",null,"Tomcat is designed to provide dynamic web content. Therefore, it is recommended to use a web server such as Apache HTTP Server as a front-end to Tomcat to allow the web server to serve static content. In the Datafor documentation, it is recommended to store any static content referenced by report images or dashboards on a web server, rather than within the Tomcat that hosts Datafor."),(0,r.kt)("h2",{id:"jvm-tuning"},"JVM Tuning"),(0,r.kt)("p",null,"Tomcat runs on the JVM, so adjusting JVM parameters can improve performance. Here are some common JVM tuning recommendations:"),(0,r.kt)("h3",{id:"increase-memory"},"Increase memory"),(0,r.kt)("p",null,"The minimum and maximum heap sizes can be set using the -Xms and -Xmx parameters. It is recommended to set them to the same value, and adjust the maximum heap size based on your application's needs."),(0,r.kt)("p",null,"For example:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"java -Xms512m -Xmx1024m -jar app.jar\n")),(0,r.kt)("h3",{id:"enable-garbage-collection-logging"},"Enable garbage collection logging"),(0,r.kt)("p",null,"The JVM provides some parameters that can enable garbage collection logging to better understand the behavior of garbage collectors in the JVM. Here are some common options:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"-XX:+PrintGC\n-XX:+PrintGCTimeStamps\n-XX:+PrintHeapAtGC\n-XX:+PrintTenuringDistribution\n-XX:+PrintGCApplicationStoppedTime\n")),(0,r.kt)("h3",{id:"enable-compiler-optimizations"},"Enable compiler optimizations"),(0,r.kt)("p",null,"The JVM includes a JIT that compiles Java bytecode into native code. The following parameters can enable JIT optimizations:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre"},"-XX:+AggressiveOpts\n-XX:+TieredCompilation\n-XX:+OptimizeStringConcat\n-XX:+UseCompressedOops\n")),(0,r.kt)("h2",{id:"considerations"},"Considerations"),(0,r.kt)("p",null,"Adjusting Datafor, Tomcat, and JVM parameters can have unexpected impacts on the system. Before making any changes, be sure to back up your system and test and evaluate in a production environment to ensure that the changes you make do not cause system crashes or declines in performance."))}m.isMDXComponent=!0}}]);